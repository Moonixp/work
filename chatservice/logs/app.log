2025-11-18T14:37:14.704Z  INFO 772241 --- [chatapp] [main] o.t.chatapp.ChatappApplicationTests      : Starting ChatappApplicationTests using Java 21.0.9 with PID 772241 (started by hyunwo in /home/hyunwo/chatapp)
2025-11-18T14:37:14.712Z  INFO 772241 --- [chatapp] [main] o.t.chatapp.ChatappApplicationTests      : No active profile set, falling back to 1 default profile: "default"
2025-11-18T14:37:17.229Z DEBUG 772241 --- [chatapp] [main] o.s.jdbc.datasource.DataSourceUtils      : Fetching JDBC Connection from DataSource
2025-11-18T14:37:17.232Z  INFO 772241 --- [chatapp] [main] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Starting...
2025-11-18T14:37:17.527Z  INFO 772241 --- [chatapp] [main] com.zaxxer.hikari.pool.HikariPool        : HikariPool-1 - Added connection org.postgresql.jdbc.PgConnection@516195cf
2025-11-18T14:37:17.532Z  INFO 772241 --- [chatapp] [main] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Start completed.
2025-11-18T14:37:17.540Z DEBUG 772241 --- [chatapp] [main] o.s.jdbc.datasource.init.ScriptUtils     : Executing SQL script from class path resource [sql/schema.sql]
2025-11-18T14:37:17.570Z DEBUG 772241 --- [chatapp] [main] o.s.jdbc.datasource.init.ScriptUtils     : SQLWarning ignored: SQL state '42P07', error code '0', message [relation "users" already exists, skipping]
2025-11-18T14:37:17.576Z DEBUG 772241 --- [chatapp] [main] o.s.jdbc.datasource.init.ScriptUtils     : 0 returned as update count for SQL: create table if not exists users ( id UUID primary key default gen_random_uuid(), username TEXT unique not null, email TEXT unique not null, password_hash VARCHAR(255) not null, role VARCHAR CHECK (role IN ('MANAGER', 'USER')), created_at TIMESTAMPTZ not null default NOW(), updated_at TIMESTAMPTZ not null default NOW(), deleted_at TIMESTAMPTZ )
2025-11-18T14:37:17.579Z DEBUG 772241 --- [chatapp] [main] o.s.jdbc.datasource.init.ScriptUtils     : SQLWarning ignored: SQL state '42P07', error code '0', message [relation "groups" already exists, skipping]
2025-11-18T14:37:17.580Z DEBUG 772241 --- [chatapp] [main] o.s.jdbc.datasource.init.ScriptUtils     : 0 returned as update count for SQL: create table if not exists groups ( id UUID primary key default gen_random_uuid(), name TEXT not null, owner_id UUID not null references users(id) on delete cascade, created_at TIMESTAMPTZ not null default NOW(), updated_at TIMESTAMPTZ not null default NOW(), deleted_at TIMESTAMPTZ )
2025-11-18T14:37:17.582Z DEBUG 772241 --- [chatapp] [main] o.s.jdbc.datasource.init.ScriptUtils     : SQLWarning ignored: SQL state '42P07', error code '0', message [relation "group_members" already exists, skipping]
2025-11-18T14:37:17.583Z DEBUG 772241 --- [chatapp] [main] o.s.jdbc.datasource.init.ScriptUtils     : 0 returned as update count for SQL: create table if not exists group_members ( group_id UUID references groups(id) on delete cascade, user_id UUID references users(id) on delete cascade, created_at TIMESTAMPTZ not null default NOW(), deleted_at TIMESTAMPTZ, primary key (group_id, user_id) )
2025-11-18T14:37:17.585Z DEBUG 772241 --- [chatapp] [main] o.s.jdbc.datasource.init.ScriptUtils     : SQLWarning ignored: SQL state '42P07', error code '0', message [relation "chats" already exists, skipping]
2025-11-18T14:37:17.586Z DEBUG 772241 --- [chatapp] [main] o.s.jdbc.datasource.init.ScriptUtils     : 0 returned as update count for SQL: create table if not exists chats ( id uuid primary key default gen_random_uuid(), group_id UUID references groups(id) on delete cascade, is_direct_chat BOOLEAN not null default false, created_at TIMESTAMPTZ not null default NOW(), updated_at TIMESTAMPTZ not null default NOW(), deleted_at TIMESTAMPTZ, constraint chk_chat_type check ( (group_id is not null and is_direct_chat = false) or (group_id is null and is_direct_chat = true) ) )
2025-11-18T14:37:17.588Z DEBUG 772241 --- [chatapp] [main] o.s.jdbc.datasource.init.ScriptUtils     : SQLWarning ignored: SQL state '42P07', error code '0', message [relation "chat_members" already exists, skipping]
2025-11-18T14:37:17.589Z DEBUG 772241 --- [chatapp] [main] o.s.jdbc.datasource.init.ScriptUtils     : 0 returned as update count for SQL: create table if not exists chat_members ( chat_id UUID references chats(id) on delete cascade, user_id UUID references users(id) on delete cascade, joined_at TIMESTAMPTZ not null default NOW(), left_at TIMESTAMPTZ, primary key (chat_id, user_id) )
2025-11-18T14:37:17.591Z DEBUG 772241 --- [chatapp] [main] o.s.jdbc.datasource.init.ScriptUtils     : SQLWarning ignored: SQL state '42P07', error code '0', message [relation "messages" already exists, skipping]
2025-11-18T14:37:17.591Z DEBUG 772241 --- [chatapp] [main] o.s.jdbc.datasource.init.ScriptUtils     : 0 returned as update count for SQL: create table if not exists messages ( id UUID primary key default gen_random_uuid() , chat_id UUID not null references chats(id) on delete cascade, sender_id UUID not null references users(id) on delete cascade, content TEXT not null, created_at TIMESTAMPTZ not null default NOW(), updated_at TIMESTAMPTZ not null default NOW(), deleted_at TIMESTAMPTZ )
2025-11-18T14:37:17.593Z DEBUG 772241 --- [chatapp] [main] o.s.jdbc.datasource.init.ScriptUtils     : SQLWarning ignored: SQL state '42P07', error code '0', message [relation "group_applications" already exists, skipping]
2025-11-18T14:37:17.594Z DEBUG 772241 --- [chatapp] [main] o.s.jdbc.datasource.init.ScriptUtils     : 0 returned as update count for SQL: create table if not exists group_applications ( id UUID primary key default gen_random_uuid(), group_id UUID not null references groups(id) on delete cascade, user_id UUID not null references users(id) on delete cascade, status TEXT default 'PENDING' check (status in ('PENDING', 'APPROVED', 'REJECTED')) not null, applied_at TIMESTAMPTZ not null default NOW(), approved_at TIMESTAMPTZ default null null, unique (group_id, user_id) )
2025-11-18T14:37:17.595Z DEBUG 772241 --- [chatapp] [main] o.s.jdbc.datasource.init.ScriptUtils     : Executed SQL script from class path resource [sql/schema.sql] in 53 ms.
2025-11-18T14:37:18.720Z  INFO 772241 --- [chatapp] [main] o.s.b.a.w.s.WelcomePageHandlerMapping    : Adding welcome page: class path resource [static/index.html]
2025-11-18T14:37:19.170Z  INFO 772241 --- [chatapp] [main] o.s.b.a.e.web.EndpointLinksResolver      : Exposing 1 endpoint beneath base path '/actuator'
2025-11-18T14:37:19.220Z  INFO 772241 --- [chatapp] [main] eAuthenticationProviderManagerConfigurer : Global AuthenticationManager configured with AuthenticationProvider bean with name authenticationProvider
2025-11-18T14:37:19.221Z  WARN 772241 --- [chatapp] [main] r$InitializeUserDetailsManagerConfigurer : Global AuthenticationManager configured with an AuthenticationProvider bean. UserDetailsService beans will not be used by Spring Security for automatically configuring username/password login. Consider removing the AuthenticationProvider bean. Alternatively, consider using the UserDetailsService in a manually instantiated DaoAuthenticationProvider. If the current configuration is intentional, to turn off this warning, increase the logging level of 'org.springframework.security.config.annotation.authentication.configuration.InitializeUserDetailsBeanManagerConfigurer' to ERROR
2025-11-18T14:37:20.108Z  INFO 772241 --- [chatapp] [main] o.t.chatapp.ChatappApplicationTests      : Started ChatappApplicationTests in 5.899 seconds (process running for 7.261)
2025-11-18T14:37:20.301Z  WARN 772241 --- [chatapp] [main] o.s.core.events.SpringDocAppInitializer  : SpringDoc /api-docs endpoint is enabled by default. To disable it in production, set the property 'springdoc.api-docs.enabled=false'
2025-11-18T14:37:20.302Z  WARN 772241 --- [chatapp] [main] o.s.core.events.SpringDocAppInitializer  : SpringDoc /swagger-ui.html endpoint is enabled by default. To disable it in production, set the property 'springdoc.swagger-ui.enabled=false'
2025-11-18T14:37:21.361Z  INFO 772241 --- [chatapp] [SpringApplicationShutdownHook] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Shutdown initiated...
2025-11-18T14:37:21.370Z  INFO 772241 --- [chatapp] [SpringApplicationShutdownHook] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Shutdown completed.
2025-11-18T14:37:59.586Z  INFO 772929 --- [chatapp] [main] o.turntabl.chatapp.ChatappApplication    : Starting ChatappApplication v0.0.1-SNAPSHOT using Java 21.0.9 with PID 772929 (/home/hyunwo/chatapp/target/chatapp-0.0.1-SNAPSHOT.jar started by hyunwo in /home/hyunwo/chatapp)
2025-11-18T14:37:59.590Z  INFO 772929 --- [chatapp] [main] o.turntabl.chatapp.ChatappApplication    : No active profile set, falling back to 1 default profile: "default"
2025-11-18T14:38:01.915Z  INFO 772929 --- [chatapp] [main] o.s.b.w.embedded.tomcat.TomcatWebServer  : Tomcat initialized with port 8080 (http)
2025-11-18T14:38:01.934Z  INFO 772929 --- [chatapp] [main] o.apache.catalina.core.StandardService   : Starting service [Tomcat]
2025-11-18T14:38:01.935Z  INFO 772929 --- [chatapp] [main] o.apache.catalina.core.StandardEngine    : Starting Servlet engine: [Apache Tomcat/10.1.48]
2025-11-18T14:38:01.978Z  INFO 772929 --- [chatapp] [main] o.a.c.c.C.[Tomcat].[localhost].[/]       : Initializing Spring embedded WebApplicationContext
2025-11-18T14:38:01.979Z  INFO 772929 --- [chatapp] [main] w.s.c.ServletWebServerApplicationContext : Root WebApplicationContext: initialization completed in 2304 ms
2025-11-18T14:38:02.292Z DEBUG 772929 --- [chatapp] [main] o.s.jdbc.datasource.DataSourceUtils      : Fetching JDBC Connection from DataSource
2025-11-18T14:38:02.295Z  INFO 772929 --- [chatapp] [main] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Starting...
2025-11-18T14:38:02.456Z  INFO 772929 --- [chatapp] [main] com.zaxxer.hikari.pool.HikariPool        : HikariPool-1 - Added connection org.postgresql.jdbc.PgConnection@3a38e4dc
2025-11-18T14:38:02.459Z  INFO 772929 --- [chatapp] [main] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Start completed.
2025-11-18T14:38:02.462Z DEBUG 772929 --- [chatapp] [main] o.s.jdbc.datasource.init.ScriptUtils     : Executing SQL script from class path resource [sql/schema.sql]
2025-11-18T14:38:02.474Z DEBUG 772929 --- [chatapp] [main] o.s.jdbc.datasource.init.ScriptUtils     : SQLWarning ignored: SQL state '42P07', error code '0', message [relation "users" already exists, skipping]
2025-11-18T14:38:02.479Z DEBUG 772929 --- [chatapp] [main] o.s.jdbc.datasource.init.ScriptUtils     : 0 returned as update count for SQL: create table if not exists users ( id UUID primary key default gen_random_uuid(), username TEXT unique not null, email TEXT unique not null, password_hash VARCHAR(255) not null, role VARCHAR CHECK (role IN ('MANAGER', 'USER')), created_at TIMESTAMPTZ not null default NOW(), updated_at TIMESTAMPTZ not null default NOW(), deleted_at TIMESTAMPTZ )
2025-11-18T14:38:02.481Z DEBUG 772929 --- [chatapp] [main] o.s.jdbc.datasource.init.ScriptUtils     : SQLWarning ignored: SQL state '42P07', error code '0', message [relation "groups" already exists, skipping]
2025-11-18T14:38:02.482Z DEBUG 772929 --- [chatapp] [main] o.s.jdbc.datasource.init.ScriptUtils     : 0 returned as update count for SQL: create table if not exists groups ( id UUID primary key default gen_random_uuid(), name TEXT not null, owner_id UUID not null references users(id) on delete cascade, created_at TIMESTAMPTZ not null default NOW(), updated_at TIMESTAMPTZ not null default NOW(), deleted_at TIMESTAMPTZ )
2025-11-18T14:38:02.483Z DEBUG 772929 --- [chatapp] [main] o.s.jdbc.datasource.init.ScriptUtils     : SQLWarning ignored: SQL state '42P07', error code '0', message [relation "group_members" already exists, skipping]
2025-11-18T14:38:02.484Z DEBUG 772929 --- [chatapp] [main] o.s.jdbc.datasource.init.ScriptUtils     : 0 returned as update count for SQL: create table if not exists group_members ( group_id UUID references groups(id) on delete cascade, user_id UUID references users(id) on delete cascade, created_at TIMESTAMPTZ not null default NOW(), deleted_at TIMESTAMPTZ, primary key (group_id, user_id) )
2025-11-18T14:38:02.485Z DEBUG 772929 --- [chatapp] [main] o.s.jdbc.datasource.init.ScriptUtils     : SQLWarning ignored: SQL state '42P07', error code '0', message [relation "chats" already exists, skipping]
2025-11-18T14:38:02.486Z DEBUG 772929 --- [chatapp] [main] o.s.jdbc.datasource.init.ScriptUtils     : 0 returned as update count for SQL: create table if not exists chats ( id uuid primary key default gen_random_uuid(), group_id UUID references groups(id) on delete cascade, is_direct_chat BOOLEAN not null default false, created_at TIMESTAMPTZ not null default NOW(), updated_at TIMESTAMPTZ not null default NOW(), deleted_at TIMESTAMPTZ, constraint chk_chat_type check ( (group_id is not null and is_direct_chat = false) or (group_id is null and is_direct_chat = true) ) )
2025-11-18T14:38:02.487Z DEBUG 772929 --- [chatapp] [main] o.s.jdbc.datasource.init.ScriptUtils     : SQLWarning ignored: SQL state '42P07', error code '0', message [relation "chat_members" already exists, skipping]
2025-11-18T14:38:02.487Z DEBUG 772929 --- [chatapp] [main] o.s.jdbc.datasource.init.ScriptUtils     : 0 returned as update count for SQL: create table if not exists chat_members ( chat_id UUID references chats(id) on delete cascade, user_id UUID references users(id) on delete cascade, joined_at TIMESTAMPTZ not null default NOW(), left_at TIMESTAMPTZ, primary key (chat_id, user_id) )
2025-11-18T14:38:02.488Z DEBUG 772929 --- [chatapp] [main] o.s.jdbc.datasource.init.ScriptUtils     : SQLWarning ignored: SQL state '42P07', error code '0', message [relation "messages" already exists, skipping]
2025-11-18T14:38:02.489Z DEBUG 772929 --- [chatapp] [main] o.s.jdbc.datasource.init.ScriptUtils     : 0 returned as update count for SQL: create table if not exists messages ( id UUID primary key default gen_random_uuid() , chat_id UUID not null references chats(id) on delete cascade, sender_id UUID not null references users(id) on delete cascade, content TEXT not null, created_at TIMESTAMPTZ not null default NOW(), updated_at TIMESTAMPTZ not null default NOW(), deleted_at TIMESTAMPTZ )
2025-11-18T14:38:02.490Z DEBUG 772929 --- [chatapp] [main] o.s.jdbc.datasource.init.ScriptUtils     : SQLWarning ignored: SQL state '42P07', error code '0', message [relation "group_applications" already exists, skipping]
2025-11-18T14:38:02.491Z DEBUG 772929 --- [chatapp] [main] o.s.jdbc.datasource.init.ScriptUtils     : 0 returned as update count for SQL: create table if not exists group_applications ( id UUID primary key default gen_random_uuid(), group_id UUID not null references groups(id) on delete cascade, user_id UUID not null references users(id) on delete cascade, status TEXT default 'PENDING' check (status in ('PENDING', 'APPROVED', 'REJECTED')) not null, applied_at TIMESTAMPTZ not null default NOW(), approved_at TIMESTAMPTZ default null null, unique (group_id, user_id) )
2025-11-18T14:38:02.495Z DEBUG 772929 --- [chatapp] [main] o.s.jdbc.datasource.init.ScriptUtils     : Executed SQL script from class path resource [sql/schema.sql] in 29 ms.
2025-11-18T14:38:03.461Z  INFO 772929 --- [chatapp] [main] o.s.b.a.w.s.WelcomePageHandlerMapping    : Adding welcome page: class path resource [static/index.html]
2025-11-18T14:38:03.795Z  INFO 772929 --- [chatapp] [main] o.s.b.a.e.web.EndpointLinksResolver      : Exposing 1 endpoint beneath base path '/actuator'
2025-11-18T14:38:03.863Z  INFO 772929 --- [chatapp] [main] eAuthenticationProviderManagerConfigurer : Global AuthenticationManager configured with AuthenticationProvider bean with name authenticationProvider
2025-11-18T14:38:03.864Z  WARN 772929 --- [chatapp] [main] r$InitializeUserDetailsManagerConfigurer : Global AuthenticationManager configured with an AuthenticationProvider bean. UserDetailsService beans will not be used by Spring Security for automatically configuring username/password login. Consider removing the AuthenticationProvider bean. Alternatively, consider using the UserDetailsService in a manually instantiated DaoAuthenticationProvider. If the current configuration is intentional, to turn off this warning, increase the logging level of 'org.springframework.security.config.annotation.authentication.configuration.InitializeUserDetailsBeanManagerConfigurer' to ERROR
2025-11-18T14:38:04.672Z  INFO 772929 --- [chatapp] [main] o.s.b.w.embedded.tomcat.TomcatWebServer  : Tomcat started on port 8080 (http) with context path '/'
2025-11-18T14:38:04.689Z  INFO 772929 --- [chatapp] [main] o.turntabl.chatapp.ChatappApplication    : Started ChatappApplication in 5.751 seconds (process running for 6.272)
2025-11-18T14:38:04.791Z  WARN 772929 --- [chatapp] [main] o.s.core.events.SpringDocAppInitializer  : SpringDoc /api-docs endpoint is enabled by default. To disable it in production, set the property 'springdoc.api-docs.enabled=false'
2025-11-18T14:38:04.793Z  WARN 772929 --- [chatapp] [main] o.s.core.events.SpringDocAppInitializer  : SpringDoc /swagger-ui.html endpoint is enabled by default. To disable it in production, set the property 'springdoc.swagger-ui.enabled=false'
2025-11-18T14:38:09.508Z  INFO 772929 --- [chatapp] [SpringApplicationShutdownHook] o.s.b.w.e.tomcat.GracefulShutdown        : Commencing graceful shutdown. Waiting for active requests to complete
2025-11-18T14:38:09.515Z  INFO 772929 --- [chatapp] [tomcat-shutdown] o.s.b.w.e.tomcat.GracefulShutdown        : Graceful shutdown complete
2025-11-18T14:38:09.528Z  INFO 772929 --- [chatapp] [SpringApplicationShutdownHook] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Shutdown initiated...
2025-11-18T14:38:09.536Z  INFO 772929 --- [chatapp] [SpringApplicationShutdownHook] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Shutdown completed.
